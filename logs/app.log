2025-09-02 16:34:37 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:34:57 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:35:10 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:35:10 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:35:10 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:35:10 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Could not determine join condition between parent/child tables on relationship User.roles - there are multiple foreign key paths linking the tables via secondary table 'user_roles'.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference from the secondary table to each of the parent and child tables.
2025-09-02 16:35:26 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:35:26 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:35:26 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:35:26 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[User(users)], expression 'Annotation' failed to locate a name ('Annotation'). If this is a class name, consider adding this relationship() to the <class 'backend.models.user.User'> class after both dependent classes have been defined.
2025-09-02 16:35:33 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:35:33 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:35:33 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:35:33 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[User(users)], expression 'Annotation' failed to locate a name ('Annotation'). If this is a class name, consider adding this relationship() to the <class 'backend.models.user.User'> class after both dependent classes have been defined.
2025-09-02 16:35:47 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:35:47 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:35:47 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:35:47 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[User(users)], expression 'Annotation' failed to locate a name ('Annotation'). If this is a class name, consider adding this relationship() to the <class 'backend.models.user.User'> class after both dependent classes have been defined.
2025-09-02 16:38:31 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:38:31 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:38:31 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:38:31 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[User(users)], expression 'Annotation' failed to locate a name ('Annotation'). If this is a class name, consider adding this relationship() to the <class 'backend.models.user.User'> class after both dependent classes have been defined.
2025-09-02 16:39:06 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:39:06 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:39:06 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:39:06 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[User(users)], expression 'Annotation' failed to locate a name ('Annotation'). If this is a class name, consider adding this relationship() to the <class 'backend.models.user.User'> class after both dependent classes have been defined.
2025-09-02 16:39:14 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:39:14 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:39:14 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:39:14 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: When initializing mapper Mapper[Annotation(annotations)], expression 'Image' failed to locate a name ('Image'). If this is a class name, consider adding this relationship() to the <class 'backend.models.annotation.Annotation'> class after both dependent classes have been defined.
2025-09-02 16:39:28 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:39:28 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:39:28 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:39:28 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:39:43 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:39:43 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:39:43 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:39:43 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:39:58 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:39:58 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:39:58 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:39:58 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:40:13 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:40:13 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:40:13 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:40:13 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:40:20 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:40:20 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:40:20 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:40:20 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:40:27 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:40:27 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:40:27 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:40:27 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:40:54 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:40:54 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:40:54 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:40:54 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'users', column 'preferences'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x00000229B080D6A0> can't render element of type JSONB
2025-09-02 16:41:05 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:41:05 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:41:05 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:41:05 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'users', column 'preferences'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x00000196E6DE96A0> can't render element of type JSONB
2025-09-02 16:41:27 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:41:27 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:41:27 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:41:27 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'series', column 'acquisition_parameters'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x000001FC82EC96A0> can't render element of type JSONB
2025-09-02 16:41:36 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:41:36 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:41:36 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:41:36 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'series', column 'acquisition_parameters'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x00000242680496A0> can't render element of type JSONB
2025-09-02 16:41:45 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:41:45 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:41:45 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:41:46 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'ai_models', column 'input_shape'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x000001A9820B96A0> can't render element of type JSONB
2025-09-02 16:42:19 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:42:19 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:42:19 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:42:19 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'annotation_consensus', column 'participating_annotators'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x00000202504396A0> can't render element of type ARRAY
2025-09-02 16:42:57 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:42:57 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:42:57 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:42:57 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'annotation_consensus', column 'participating_annotators'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x0000015768F896A0> can't render element of type ARRAY
2025-09-02 16:43:37 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:43:37 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:43:37 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:43:37 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'annotation_consensus', column 'participating_annotators'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x0000028302DA96A0> can't render element of type ARRAY
2025-09-02 16:43:51 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:43:51 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:43:51 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:43:51 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'annotation_consensus', column 'participating_annotators'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x0000026613EE96A0> can't render element of type ARRAY
2025-09-02 16:44:07 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:44:07 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:44:07 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:44:07 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'audit_logs', column 'ip_address'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x0000029D4DEA96A0> can't render element of type INET
2025-09-02 16:44:20 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:44:20 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:44:20 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:44:20 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (in table 'audit_logs', column 'ip_address'): Compiler <sqlalchemy.dialects.sqlite.base.SQLiteTypeCompiler object at 0x0000021A9F0096A0> can't render element of type INET
2025-09-02 16:44:36 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:44:36 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:44:36 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:44:36 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:44:50 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:44:50 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:44:50 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:44:50 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:45:59 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:45:59 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:45:59 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:45:59 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Mapper 'Mapper[Image(images)]' has no property 'metadata'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-09-02 16:46:13 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:46:13 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:46:13 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:46:13 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Could not determine join condition between parent/child tables on relationship Role.users - there are multiple foreign key paths linking the tables via secondary table 'user_roles'.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference from the secondary table to each of the parent and child tables.
2025-09-02 16:46:27 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:46:27 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:46:27 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:46:27 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Could not determine join condition between parent/child tables on relationship Role.users - there are multiple foreign key paths linking the tables via secondary table 'user_roles'.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference from the secondary table to each of the parent and child tables.
2025-09-02 16:46:43 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:46:43 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:46:43 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:46:43 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Could not determine join condition between parent/child tables on relationship User.roles - there are no foreign keys linking these tables via secondary table 'user_roles'.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify 'primaryjoin' and 'secondaryjoin' expressions.
2025-09-02 16:46:55 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:46:55 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:46:55 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:46:55 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: Could not determine join condition between parent/child tables on relationship User.roles - there are no foreign keys linking these tables via secondary table 'user_roles'.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify 'primaryjoin' and 'secondaryjoin' expressions.
2025-09-02 16:47:11 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:47:11 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:47:11 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:47:11 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 855 - bcrypt 'builtin' backend not enabled via $PASSLIB_BUILTIN_BCRYPT
2025-09-02 16:47:11 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')
2025-09-02 16:47:23 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:47:23 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:47:23 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:47:23 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 855 - bcrypt 'builtin' backend not enabled via $PASSLIB_BUILTIN_BCRYPT
2025-09-02 16:47:23 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')
2025-09-02 16:47:58 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:47:58 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:47:58 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:47:59 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 855 - bcrypt 'builtin' backend not enabled via $PASSLIB_BUILTIN_BCRYPT
2025-09-02 16:47:59 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: bcrypt: no backends available -- recommend you install one (e.g. 'pip install bcrypt')
2025-09-02 16:48:20 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:48:20 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:48:20 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:48:20 - passlib.handlers.bcrypt - WARNING - bcrypt - _load_backend_mixin - 622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "F:\medical AI\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-02 16:48:20 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 625 - detected 'bcrypt' backend, version '<unknown>'
2025-09-02 16:48:20 - passlib.handlers.bcrypt - DEBUG - bcrypt - _finalize_backend_mixin - 406 - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-09-02 16:48:20 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: 数据库连接失败
2025-09-02 16:48:38 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:48:38 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:48:38 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:48:38 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 16:48:38 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 16:48:52 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 16:48:52 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 16:48:52 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 16:48:52 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 16:48:52 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 16:49:12 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/?ide_webview_request_time=1756802952398, Client: 127.0.0.1
2025-09-02 16:49:12 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 16:49:12 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/@vite/client, Client: 127.0.0.1
2025-09-02 16:49:12 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:49:49 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/, Client: 127.0.0.1
2025-09-02 16:49:49 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 16:49:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/favicon.ico, Client: 127.0.0.1
2025-09-02 16:49:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:50:13 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/, Client: 127.0.0.1
2025-09-02 16:50:13 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 16:50:15 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/favicon.ico, Client: 127.0.0.1
2025-09-02 16:50:15 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:50:25 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/health, Client: 127.0.0.1
2025-09-02 16:50:25 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 16:51:02 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/, Client: 127.0.0.1
2025-09-02 16:51:02 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 16:51:04 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/favicon.ico, Client: 127.0.0.1
2025-09-02 16:51:04 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.002s
2025-09-02 16:51:48 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/, Client: 127.0.0.1
2025-09-02 16:51:48 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 16:51:50 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/favicon.ico, Client: 127.0.0.1
2025-09-02 16:51:50 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:53:32 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 16:53:32 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:53:32 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 16:53:32 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:33 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:33 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:43 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:43 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:50 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:50 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:52 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:53 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:54:55 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 16:54:55 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 16:56:13 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 17:20:39 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:20:41 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:20:41 - fastapi - ERROR - utils - ensure_multipart_is_installed - 114 - Form data requires "python-multipart" to be installed. 
You can install "python-multipart" with: 

pip install python-multipart

2025-09-02 17:21:36 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:21:38 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:21:38 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:22:20 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:22:21 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:22:21 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:23:05 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:23:07 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:23:07 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:23:21 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:23:24 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:23:24 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:23:24 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:23:24 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:23:24 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:23:25 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 17:23:25 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 17:23:25 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/?ide_webview_request_time=1756802952398, Client: 127.0.0.1
2025-09-02 17:23:25 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 17:23:25 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/@vite/client, Client: 127.0.0.1
2025-09-02 17:23:25 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.002s
2025-09-02 17:46:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 17:46:52 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:46:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 17:46:52 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:48:58 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:48:58 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:48:58 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 1e7e95cb-d105-4619-9436-4f780da9b813, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:48:58 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.005s
2025-09-02 17:49:02 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:02 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:02 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: bf3169cd-50bd-410a-8238-ef1c7718d83a, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:02 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:03 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:03 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 514cf1df-0741-4b95-8ddd-7903317597ce, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:03 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:03 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: c2f950cd-e6a9-45ff-8546-a0dfa6f1e16e, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:03 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:03 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 9dc61c63-a5b2-4a47-9c46-8c42386fa45c, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:03 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:03 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: d3b597a9-b4fe-4cd2-8bf2-cebbb97bd403, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:03 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:05 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:05 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:05 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 9a6774fd-fa9b-4d23-a2da-6fc33211684c, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:05 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:22 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:22 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:22 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: bf0c4f8a-74e4-43eb-ae3b-32a7e92a59a4, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:22 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:22 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:22 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:22 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 22e54a14-edbd-451f-ad52-117df312f681, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:22 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:23 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:23 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: cb54bfcc-4a35-4783-8d17-ece049c4bf5a, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:23 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:23 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: e6ed9a1a-b36e-4d3d-8882-4e838e3e9909, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:23 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:23 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: b6cf33a8-0221-4fd5-8168-7e10dec80a40, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:53 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:53 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:53 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 09afe533-f1d4-4223-92ec-641e5674ad7d, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:53 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:49:53 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:53 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:53 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 1f396e20-9960-48e8-b665-185d58d91f57, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:53 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.004s
2025-09-02 17:49:54 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:54 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:54 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: ceadf37f-b1ee-4ed3-8e05-bca31f9c9519, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:54 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.004s
2025-09-02 17:49:55 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:55 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:55 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 5ed924c5-6201-485b-9df9-026cab327133, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:55 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.003s
2025-09-02 17:49:55 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:49:55 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'AuthService' object has no attribute 'login'
2025-09-02 17:49:55 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 35a4f708-10b4-459b-9a31-ccfe981a94a2, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 17:49:55 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.002s
2025-09-02 17:51:36 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 17:51:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:51:55 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:51:55 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:52:06 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:52:08 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:52:08 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:52:08 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:52:08 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:52:08 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:52:08 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 17:52:08 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 17:52:41 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:41 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:41 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: d9ea1953-c1cc-4885-91ed-9be6fa6867b7, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:41 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.007s
2025-09-02 17:52:41 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:41 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:41 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 57ffa848-e6e7-4469-ab53-17e92f4eae03, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:41 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:42 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:42 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 1f492ca8-ed09-47ec-b4ae-52731ce5fb1c, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:42 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:42 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 61ee6e24-5dc3-4179-8f0b-2da9412ce6d8, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.003s
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:42 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:42 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 49575525-410b-4d7d-9253-006995371fdf, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.005s
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:42 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:52:42 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: ae1dfa9a-bb45-4509-afdd-d8ff851f8cd2, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:52:42 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 17:52:44 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 17:52:44 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:52:44 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 17:52:44 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:52:48 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:52:48 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: ee856d54-8627-4570-b64d-44412da27bf3, Status: 401, Detail: 用户名或密码错误
2025-09-02 17:52:48 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 17:53:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/, Client: 127.0.0.1
2025-09-02 17:53:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 17:53:25 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/favicon.ico, Client: 127.0.0.1
2025-09-02 17:53:25 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:53:55 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/?ide_webview_request_time=1756806835274, Client: 127.0.0.1
2025-09-02 17:53:55 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 17:53:55 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/@vite/client, Client: 127.0.0.1
2025-09-02 17:53:55 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 17:55:07 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/health, Client: 127.0.0.1
2025-09-02 17:55:07 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 17:55:25 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:55:25 - backend.services.auth_service - ERROR - auth_service - login_user - 238 - 用户登录失败: 'User' object has no attribute 'failed_login_attempts'
2025-09-02 17:55:25 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: b9934631-46ae-43ad-bc12-8471ed5bdc4b, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:55:25 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 17:56:14 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 17:56:28 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:56:29 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:56:29 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:56:29 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:56:29 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:56:29 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:56:29 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (sqlite3.OperationalError) no such column: users.failed_login_attempts
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.department AS users_department, users.title AS users_title, users.license_number AS users_license_number, users.specialization AS users_specialization, users.experience_years AS users_experience_years, users.phone AS users_phone, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.login_count AS users_login_count, users.failed_login_attempts AS users_failed_login_attempts, users.preferences AS users_preferences, users.profile_image_url AS users_profile_image_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-02 17:56:46 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:56:47 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:56:48 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:56:48 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:56:48 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:56:48 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:56:48 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (sqlite3.OperationalError) no such column: users.failed_login_attempts
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.department AS users_department, users.title AS users_title, users.license_number AS users_license_number, users.specialization AS users_specialization, users.experience_years AS users_experience_years, users.phone AS users_phone, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.login_count AS users_login_count, users.failed_login_attempts AS users_failed_login_attempts, users.preferences AS users_preferences, users.profile_image_url AS users_profile_image_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-02 17:57:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:05 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:05 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:57:06 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:57:06 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:57:06 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:57:06 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (sqlite3.OperationalError) no such column: users.failed_login_attempts
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.department AS users_department, users.title AS users_title, users.license_number AS users_license_number, users.specialization AS users_specialization, users.experience_years AS users_experience_years, users.phone AS users_phone, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.login_count AS users_login_count, users.failed_login_attempts AS users_failed_login_attempts, users.preferences AS users_preferences, users.profile_image_url AS users_profile_image_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-02 17:57:23 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:24 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:24 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:57:34 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:36 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:57:36 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:57:36 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:57:36 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:57:36 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:57:36 - backend.main - ERROR - main - lifespan - 43 - 应用启动失败: (sqlite3.OperationalError) no such column: users.failed_login_attempts
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.department AS users_department, users.title AS users_title, users.license_number AS users_license_number, users.specialization AS users_specialization, users.experience_years AS users_experience_years, users.phone AS users_phone, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.login_count AS users_login_count, users.failed_login_attempts AS users_failed_login_attempts, users.preferences AS users_preferences, users.profile_image_url AS users_profile_image_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-02 17:58:47 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:58:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:58:49 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:59:00 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:59:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 17:59:01 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 17:59:01 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 17:59:01 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 17:59:01 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 17:59:02 - passlib.handlers.bcrypt - WARNING - bcrypt - _load_backend_mixin - 622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "F:\medical AI\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-02 17:59:02 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 625 - detected 'bcrypt' backend, version '<unknown>'
2025-09-02 17:59:02 - passlib.handlers.bcrypt - DEBUG - bcrypt - _finalize_backend_mixin - 406 - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-09-02 17:59:02 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 17:59:02 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 17:59:05 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 17:59:05 - backend.services.auth_service - ERROR - auth_service - login_user - 235 - 用户登录失败: '>=' not supported between instances of 'str' and 'int'
2025-09-02 17:59:05 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: f08db251-d784-495e-b17d-088e40ff6989, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 17:59:05 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.005s
2025-09-02 17:59:37 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:00:17 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:00:18 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:00:18 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:00:30 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:00:32 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:00:32 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:00:32 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:00:32 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:00:32 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:00:33 - passlib.handlers.bcrypt - WARNING - bcrypt - _load_backend_mixin - 622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "F:\medical AI\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-02 18:00:33 - passlib.handlers.bcrypt - DEBUG - bcrypt - _load_backend_mixin - 625 - detected 'bcrypt' backend, version '<unknown>'
2025-09-02 18:00:33 - passlib.handlers.bcrypt - DEBUG - bcrypt - _finalize_backend_mixin - 406 - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-09-02 18:00:33 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:00:33 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:00:34 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:00:34 - backend.services.auth_service - ERROR - auth_service - _generate_access_token - 293 - 生成访问令牌失败: 'User' object has no attribute 'role'
2025-09-02 18:00:34 - backend.services.auth_service - ERROR - auth_service - login_user - 235 - 用户登录失败: 'User' object has no attribute 'role'
2025-09-02 18:00:34 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 65d5bded-528e-4f91-a058-b9f3edce083d, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 18:00:34 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.237s
2025-09-02 18:01:02 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:01:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:01:17 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:01:17 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:01:17 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:01:17 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:01:17 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:01:17 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:01:17 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:01:30 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:01:30 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:01:30 - backend.api.auth - ERROR - auth - login - 217 - 用户登录失败: 'user_info'
2025-09-02 18:01:30 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: a8933911-af3d-4639-b1b7-8c1e3bee720b, Status: 500, Detail: 登录失败，请稍后重试
2025-09-02 18:01:30 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 500, Time: 0.271s
2025-09-02 18:01:30 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:01:44 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:01:46 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:01:46 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:01:46 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:01:46 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:01:46 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:01:46 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:01:46 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:02:26 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:02:46 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:02:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:02:48 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:03:00 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:01 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:03:01 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:03:02 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:03:02 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:03:02 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:03:02 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:03:14 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:16 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:16 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:03:30 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:03:31 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:03:31 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:03:32 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:03:32 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:03:32 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:03:32 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:03:33 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:03:33 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 141208e0-dee8-4c84-939d-d3411eca8217, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:03:33 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.254s
2025-09-02 18:04:00 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:04:00 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:04:00 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.270s
2025-09-02 18:04:08 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:04:08 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.002s
2025-09-02 18:04:08 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:04:08 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 404, Time: 0.002s
2025-09-02 18:04:30 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:04:30 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 34d6e03c-bc33-4a5c-bd7b-926c4e2d8a97, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:04:30 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 18:04:31 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:04:31 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: f40b7f2c-59bc-448a-8661-9a38e72296b7, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:04:31 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 18:04:56 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:04:56 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: e9e4eefd-4284-4e9c-b1dc-e302303c4afc, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:04:56 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.249s
2025-09-02 18:05:01 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:05:02 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:05:02 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.260s
2025-09-02 18:05:21 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:05:21 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 97dbdee0-76a8-4f16-9520-81426b2f1744, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:05:21 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.003s
2025-09-02 18:05:28 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:05:28 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:05:28 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.276s
2025-09-02 18:05:29 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:05:29 - backend.api.auth - ERROR - auth - get_current_user - 98 - 用户认证失败: 401: 无效的访问令牌
2025-09-02 18:05:29 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: d3f51b2f-1da1-4fa2-9be1-aad9614e2d5e, Status: 401, Detail: 认证失败
2025-09-02 18:05:29 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.009s
2025-09-02 18:05:38 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:05:38 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:05:38 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.261s
2025-09-02 18:05:47 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:05:47 - backend.api.auth - ERROR - auth - get_current_user - 98 - 用户认证失败: 401: 无效的访问令牌
2025-09-02 18:05:47 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 492e2832-e8cc-4f7a-a4ff-417a47ec5b15, Status: 401, Detail: 认证失败
2025-09-02 18:05:47 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 18:06:35 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:06:36 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:06:50 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:06:51 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:06:51 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:06:51 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:06:52 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:06:52 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:06:52 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:06:52 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:06:52 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:06:52 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:06:52 - backend.main - ERROR - main - log_requests - 123 - Request failed - ID: unknown, Error: 'User' object has no attribute 'get', Time: 0.010s
2025-09-02 18:06:52 - backend.main - ERROR - main - general_exception_handler - 157 - Unhandled Exception - ID: ce304933-e2e5-4c38-b791-941fa4a7b4f3, Type: AttributeError, Message: 'User' object has no attribute 'get'
  + Exception Group Traceback (most recent call last):
  |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 183, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "F:\medical AI\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\main.py", line 104, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\main.py", line 85, in add_request_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\fastapi\routing.py", line 292, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<6 lines>...
    |     )
    |     ^
    |   File "F:\medical AI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\api\auth.py", line 107, in get_current_active_user
    |     if not current_user.get('is_active'):
    |            ^^^^^^^^^^^^^^^^
    | AttributeError: 'User' object has no attribute 'get'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\main.py", line 104, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\main.py", line 85, in add_request_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\fastapi\routing.py", line 292, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "F:\medical AI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\api\auth.py", line 107, in get_current_active_user
    if not current_user.get('is_active'):
           ^^^^^^^^^^^^^^^^
AttributeError: 'User' object has no attribute 'get'
2025-09-02 18:06:53 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:06:53 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:06:53 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:06:53 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:06:53 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:06:53 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:06:53 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:07:12 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:07:13 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:07:26 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:27 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:27 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:07:28 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:07:28 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:07:28 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:07:28 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:07:28 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:28 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:07:30 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:30 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:07:30 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:07:30 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:07:30 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:07:30 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:07:30 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:07:32 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:07:34 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:07:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:50 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:50 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:50 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:07:50 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:07:50 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:07:50 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:07:50 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:07:51 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:07:51 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:07:51 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: f64aa4fc-29a8-4fb0-b718-208a644b4450, Status: 401, Detail: 用户名或密码错误
2025-09-02 18:07:51 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.008s
2025-09-02 18:07:52 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:07:52 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:07:52 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:07:52 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:07:52 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:07:52 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:07:52 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:09:10 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:09:10 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:09:10 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.263s
2025-09-02 18:09:18 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:09:18 - backend.main - ERROR - main - log_requests - 123 - Request failed - ID: unknown, Error: Instance <User at 0x207730a2ea0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3), Time: 0.005s
2025-09-02 18:09:18 - backend.main - ERROR - main - general_exception_handler - 157 - Unhandled Exception - ID: 0257698f-9f4e-40a4-84eb-88967a871636, Type: DetachedInstanceError, Message: Instance <User at 0x207730a2ea0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
  + Exception Group Traceback (most recent call last):
  |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 183, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "F:\medical AI\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\main.py", line 104, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\main.py", line 85, in add_request_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\fastapi\routing.py", line 292, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<6 lines>...
    |     )
    |     ^
    |   File "F:\medical AI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    |     solved = await call(**solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\backend\api\auth.py", line 107, in get_current_active_user
    |     if not current_user.is_active:
    |            ^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 569, in __get__
    |     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
    |            ~~~~~~~~~~~~~^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1096, in get
    |     value = self._fire_loader_callables(state, key, passive)
    |   File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1126, in _fire_loader_callables
    |     return state._load_expired(state, passive)
    |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\state.py", line 803, in _load_expired
    |     self.manager.expired_attribute_loader(self, toload, passive)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    |   File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 1607, in load_scalar_attributes
    |     raise orm_exc.DetachedInstanceError(
    |     ...<2 lines>...
    |     )
    | sqlalchemy.orm.exc.DetachedInstanceError: Instance <User at 0x207730a2ea0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\main.py", line 104, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\main.py", line 85, in add_request_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "F:\medical AI\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "F:\medical AI\venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\fastapi\routing.py", line 292, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "F:\medical AI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\backend\api\auth.py", line 107, in get_current_active_user
    if not current_user.is_active:
           ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
  File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\state.py", line 803, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\medical AI\venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 1607, in load_scalar_attributes
    raise orm_exc.DetachedInstanceError(
    ...<2 lines>...
    )
sqlalchemy.orm.exc.DetachedInstanceError: Instance <User at 0x207730a2ea0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:09:42 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:09:44 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:09:55 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:09:56 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:09:56 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:09:56 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:09:56 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:09:56 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:09:57 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:09:57 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:09:57 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:09:57 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:09:57 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.301s
2025-09-02 18:09:57 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:09:57 - backend.api.auth - ERROR - auth - get_current_user - 110 - 用户认证失败: Instance <User at 0x212ceb10770> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:09:57 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 89fc50a7-bd82-4277-a399-bdf66d9ba723, Status: 401, Detail: 认证失败
2025-09-02 18:09:57 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.010s
2025-09-02 18:09:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:09:58 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:09:58 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:09:59 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:09:59 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:09:59 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:09:59 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:09:59 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:10:32 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:10:34 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:10:46 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:10:47 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:10:47 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:10:47 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:10:47 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:10:47 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:10:47 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:10:47 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:10:47 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:10:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:10:48 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:10:48 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.275s
2025-09-02 18:10:48 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:10:48 - backend.api.auth - INFO - auth - get_current_user - 86 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:10:48 - backend.api.auth - ERROR - auth - get_current_user - 118 - 用户认证失败: Instance <User at 0x293c5300770> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:10:48 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 6da7b6fb-c83e-481c-9a53-38ebf7adf8ee, Status: 401, Detail: 认证失败
2025-09-02 18:10:48 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.006s
2025-09-02 18:10:49 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:10:49 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:10:49 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:10:49 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:10:49 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:10:50 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:10:50 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:11:03 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:11:04 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:11:04 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.272s
2025-09-02 18:11:04 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:11:04 - backend.api.auth - INFO - auth - get_current_user - 86 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:11:04 - backend.api.auth - ERROR - auth - get_current_user - 118 - 用户认证失败: Instance <User at 0x293c52e5490> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:11:04 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: b07264f0-4148-478b-8614-f76b186954e9, Status: 401, Detail: 认证失败
2025-09-02 18:11:04 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 18:12:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:12:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:12:04 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:12:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:12:17 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:12:17 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:12:18 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:12:18 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:12:18 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:12:18 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:12:18 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:12:21 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:12:21 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:12:21 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.274s
2025-09-02 18:12:21 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:12:21 - backend.api.auth - INFO - auth - get_current_user - 86 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:12:21 - backend.api.auth - ERROR - auth - get_current_user - 118 - 用户认证失败: Instance <User at 0x293c4fd28b0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:12:21 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: f43a738a-7734-42f0-80c7-7901fafd7b29, Status: 401, Detail: 认证失败
2025-09-02 18:12:21 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.005s
2025-09-02 18:13:00 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:13:01 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:13:13 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:13:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:13:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:13:15 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:13:15 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:13:15 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:13:15 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:13:15 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:13:15 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:13:16 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:13:16 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:13:16 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:13:16 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:13:16 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:13:17 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:13:17 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:13:17 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:13:17 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:13:17 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.278s
2025-09-02 18:13:17 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:13:17 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:13:17 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x268ac9b0510> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:13:17 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: fef4e4bb-f5cb-494d-81fa-b6197d61f7b3, Status: 401, Detail: 认证失败
2025-09-02 18:13:17 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.007s
2025-09-02 18:17:02 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:17:02 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:17:02 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.247s
2025-09-02 18:17:02 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:17:02 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:17:02 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x268ac995370> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:17:02 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: c50f21ba-df1b-4c6c-a47b-d8509afefaab, Status: 401, Detail: 认证失败
2025-09-02 18:17:02 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.007s
2025-09-02 18:17:29 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:17:30 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:17:42 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:17:44 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:17:44 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:17:44 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:17:44 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:17:44 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:17:44 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:17:44 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:17:44 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:17:45 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:17:45 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:17:45 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:17:45 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:17:45 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:17:45 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:17:46 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:17:46 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:17:46 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:17:46 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.271s
2025-09-02 18:17:46 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:17:46 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:17:46 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x2af3006c510> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:17:46 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: 3804cf37-5f9d-44e5-aa15-c672c8b7613a, Status: 401, Detail: 认证失败
2025-09-02 18:17:46 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.007s
2025-09-02 18:18:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:18:23 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:18:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.259s
2025-09-02 18:18:23 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:18:23 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:18:23 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x2af30059370> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:18:23 - backend.main - WARNING - main - http_exception_handler - 135 - HTTP Exception - ID: cb066208-5118-4fb8-a1ac-7e6f3c3e46b7, Status: 401, Detail: 认证失败
2025-09-02 18:18:23 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 401, Time: 0.004s
2025-09-02 18:19:18 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health, Client: 127.0.0.1
2025-09-02 18:19:18 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 307, Time: 0.001s
2025-09-02 18:19:18 - backend.main - INFO - main - log_requests - 98 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health/, Client: 127.0.0.1
2025-09-02 18:19:18 - backend.main - INFO - main - log_requests - 110 - Request completed - ID: unknown, Status: 200, Time: 0.013s
2025-09-02 18:19:49 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:19:50 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:20:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:20:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:20:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:20:04 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:20:05 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:20:05 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:20:05 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:20:05 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:20:05 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:20:06 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:20:06 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:20:06 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:20:06 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:20:06 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:20:06 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:20:06 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:20:06 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health, Client: 127.0.0.1
2025-09-02 18:20:06 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 307, Time: 0.002s
2025-09-02 18:20:06 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health/, Client: 127.0.0.1
2025-09-02 18:20:06 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:20:18 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health, Client: 127.0.0.1
2025-09-02 18:20:18 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 307, Time: 0.001s
2025-09-02 18:20:18 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/health/, Client: 127.0.0.1
2025-09-02 18:20:18 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:20:31 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:20:31 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:20:31 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.287s
2025-09-02 18:20:31 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:20:31 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:20:31 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x15ebee7a520> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:20:31 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: cc31dae7-85d1-4d81-8632-104b61103af5, Status: 401, Detail: 认证失败
2025-09-02 18:20:31 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.007s
2025-09-02 18:21:03 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:21:05 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:21:17 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:21:19 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:21:19 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:21:19 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:21:19 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:21:19 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:21:19 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:21:19 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:21:19 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:21:20 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:21:20 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:21:21 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:21:21 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:21:21 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:21:21 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:21:21 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:21:21 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:21:21 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:21:21 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.297s
2025-09-02 18:21:41 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:21:41 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:21:41 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x2b58f8e0510> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:21:41 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: f0eba059-be7c-4210-b0c3-05a58c62c7c2, Status: 401, Detail: 认证失败
2025-09-02 18:21:41 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.008s
2025-09-02 18:22:12 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:23:45 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:23:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:23:59 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:23:59 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:23:59 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:23:59 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:23:59 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:23:59 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:23:59 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:24:31 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:24:44 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:25:00 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:25:02 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:25:02 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:25:13 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:25:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:25:15 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:25:15 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:25:15 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:25:15 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:25:15 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:25:15 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:25:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:25:22 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:25:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.318s
2025-09-02 18:25:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:25:22 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:25:22 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x1e3c90f0510> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:25:22 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 3ef9868e-a63e-4e62-bb8f-b86fc487de43, Status: 401, Detail: 认证失败
2025-09-02 18:25:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.008s
2025-09-02 18:26:25 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:26:38 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:26:39 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:26:39 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:26:39 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:26:40 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:26:40 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:26:40 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:26:40 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:26:51 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:26:51 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:26:51 - backend.api.auth - ERROR - auth - get_current_user - 121 - 用户认证失败: Instance <User at 0x11085500410> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:26:51 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 149c1d74-0cb4-49f4-bbb0-453954d10ac9, Status: 401, Detail: 认证失败
2025-09-02 18:26:51 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.009s
2025-09-02 18:27:19 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:27:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:27:32 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:27:32 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:27:32 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:27:32 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:27:32 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:27:33 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:27:33 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:27:34 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:27:34 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:27:34 - backend.api.auth - ERROR - auth - get_current_user - 109 - 用户认证失败: Instance <User at 0x1d762b70410> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-09-02 18:27:34 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 138ce074-e849-43ac-8f5d-60b9dd516b53, Status: 401, Detail: 认证失败
2025-09-02 18:27:34 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.005s
2025-09-02 18:27:59 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:28:11 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:28:12 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:28:12 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:28:13 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:28:13 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:28:13 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:28:13 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:28:13 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:28:21 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:28:21 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:28:21 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:28:21 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:28:21 - backend.api.auth - ERROR - auth - get_current_user - 109 - 用户认证失败: 'user'
2025-09-02 18:28:21 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 993e9fd7-279c-4002-975f-eb28b1149ac9, Status: 401, Detail: 认证失败
2025-09-02 18:28:21 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.009s
2025-09-02 18:28:40 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:28:53 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:28:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:28:54 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:28:54 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:28:54 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:28:54 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:28:55 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:28:55 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:28:55 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:28:55 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:28:55 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:28:55 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:28:55 - backend.api.auth - ERROR - auth - get_current_user_info - 291 - 获取用户信息失败: 'dict' object has no attribute 'user_id'
2025-09-02 18:28:55 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: b1a19c3e-7658-4189-81c6-91bdf1b606c6, Status: 500, Detail: 获取用户信息失败
2025-09-02 18:28:55 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 500, Time: 0.007s
2025-09-02 18:29:27 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:29:41 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:29:42 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:29:42 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:29:42 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:29:42 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:29:42 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:29:42 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:29:42 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:29:42 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:29:42 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:29:42 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:29:42 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:29:42 - backend.api.auth - ERROR - auth - get_current_user_info - 291 - 获取用户信息失败: 1 validation error for UserResponse
created_at
  Input should be a valid datetime [type=datetime_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/datetime_type
2025-09-02 18:29:42 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 7e86818e-485f-449e-8343-cc8681d66f48, Status: 500, Detail: 获取用户信息失败
2025-09-02 18:29:42 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 500, Time: 0.021s
2025-09-02 18:30:13 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:30:26 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:30:27 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:30:27 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:30:27 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:30:27 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:30:27 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:30:28 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:30:28 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:30:28 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:30:28 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:30:28 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:30:28 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:30:28 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.008s
2025-09-02 18:30:45 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:30:45 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 18:30:45 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:30:45 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 18:33:09 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:33:24 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:33:26 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:33:26 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:33:26 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:33:26 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:33:26 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:33:26 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:33:26 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:37:00 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:37:00 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:37:40 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:37:41 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:37:41 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:37:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:37:55 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:37:55 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:37:56 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:37:56 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:37:56 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:37:56 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:37:56 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:37:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:37:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 18:39:52 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:39:52 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:39:52 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:39:52 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:41:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:41:10 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:41:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.262s
2025-09-02 18:41:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/admin/users, Client: 127.0.0.1
2025-09-02 18:41:10 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:41:10 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:41:10 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:41:10 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 32d4fa32-cbda-49f2-8c5b-4f1c189631c4, Status: 403, Detail: 需要角色: admin
2025-09-02 18:41:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.006s
2025-09-02 18:42:46 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:42:46 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:42:46 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.289s
2025-09-02 18:42:46 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:42:46 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:42:46 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True}}
2025-09-02 18:42:46 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:42:46 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.008s
2025-09-02 18:43:21 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:43:21 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:43:21 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.257s
2025-09-02 18:44:13 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:44:24 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:44:41 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:44:42 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:44:42 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:44:52 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:44:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:44:54 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:44:54 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:44:54 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:44:54 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:44:54 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:44:54 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:44:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:44:57 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:44:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.250s
2025-09-02 18:44:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/auth/me, Client: 127.0.0.1
2025-09-02 18:44:57 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:44:57 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['user.update', 'user.delete', 'user.create', 'user.read', 'system.audit', 'system.backup', 'system.admin']}}
2025-09-02 18:44:57 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:44:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.008s
2025-09-02 18:45:06 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:45:06 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:45:06 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.283s
2025-09-02 18:45:06 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/admin/users, Client: 127.0.0.1
2025-09-02 18:45:06 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:45:06 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['user.update', 'user.delete', 'user.create', 'user.read', 'system.audit', 'system.backup', 'system.admin']}}
2025-09-02 18:45:06 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:45:06 - backend.api.admin - ERROR - admin - get_users_admin - 283 - 获取用户列表失败: Don't know how to join to <Mapper at 0x1ab7ec1e210; Role>. Please use the .select_from() method to establish an explicit left side, as well as providing an explicit ON clause if not present already to help resolve the ambiguity.
2025-09-02 18:45:06 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 647300e7-3df8-43ec-8457-d0a8bf776106, Status: 500, Detail: 获取用户列表失败
2025-09-02 18:45:06 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 500, Time: 0.009s
2025-09-02 18:47:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:47:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:47:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:47:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:48:02 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:48:02 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:48:02 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:48:02 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:48:37 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:48:50 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:48:51 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:48:51 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:48:51 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:48:51 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:48:51 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:48:52 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:48:52 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:48:55 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:49:08 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:49:10 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:49:10 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:49:10 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:49:11 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:49:11 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:49:11 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:49:11 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:51:05 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:51:20 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:51:21 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:51:21 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:51:22 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:51:22 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:51:22 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:51:22 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:51:22 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.003s
2025-09-02 18:51:22 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.325s
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/admin/users, Client: 127.0.0.1
2025-09-02 18:51:22 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:51:22 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['user.update', 'user.delete', 'user.create', 'user.read', 'system.audit', 'system.backup', 'system.admin']}}
2025-09-02 18:51:22 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:51:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.021s
2025-09-02 18:51:25 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:51:25 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 18:51:25 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 18:51:25 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 18:52:12 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:52:12 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:52:12 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.272s
2025-09-02 18:52:12 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[40:59]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[61:110]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[112:124]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[126:136]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[140:966]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[1008:1027]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[1029:1059]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[1063:1069]
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:52:12 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 18:52:12 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:52:13 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['user.update', 'user.delete', 'user.create', 'user.read', 'system.audit', 'system.backup', 'system.admin']}}
2025-09-02 18:52:13 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:52:13 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 28215fa0-9ed3-483f-9c5b-eb308cd8874a, Status: 403, Detail: 需要权限: image_upload
2025-09-02 18:52:13 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.010s
2025-09-02 18:52:42 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:52:55 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:52:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:52:57 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:52:57 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:52:57 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:52:57 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:52:57 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:52:57 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:53:00 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:53:13 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:53:15 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:53:15 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:53:15 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:53:15 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:53:15 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:53:15 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:53:15 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:53:42 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:53:42 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:53:42 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.257s
2025-09-02 18:53:42 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[40:59]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[61:110]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[112:124]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[126:136]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[140:966]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[1008:1027]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[1029:1059]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[1063:1069]
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:53:42 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 18:53:42 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:53:42 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['user.update', 'user.delete', 'user.create', 'user.read', 'system.audit', 'system.backup', 'system.admin']}}
2025-09-02 18:53:42 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:53:42 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 7eb60d40-5a61-4c32-ae35-6ad77c088ddd, Status: 403, Detail: 需要权限: image.create
2025-09-02 18:53:42 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.015s
2025-09-02 18:54:17 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:54:29 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:54:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:54:31 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:54:31 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:54:31 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:54:31 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:54:31 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:54:31 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:54:37 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:54:37 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:54:37 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.299s
2025-09-02 18:54:37 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[40:59]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[61:110]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[112:124]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[126:136]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[140:966]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[1008:1027]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[1029:1059]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[1063:1069]
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:54:37 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 18:54:37 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:54:37 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 18:54:37 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:54:37 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 422, Time: 0.019s
2025-09-02 18:57:52 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:57:52 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:57:52 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.249s
2025-09-02 18:57:54 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:87]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[91:95]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[133:152]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[154:203]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[205:217]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[219:229]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[233:1059]
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 18:57:54 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 18:57:54 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 18:57:54 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 18:57:54 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 18:57:54 - backend.api.images - ERROR - images - upload_image - 166 - 图像上传失败: ImageService.upload_image() got an unexpected keyword argument 'file_content'
2025-09-02 18:57:54 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 8d1f995d-0762-48c7-acf5-c4a4459531ff, Status: 500, Detail: 图像上传失败
2025-09-02 18:57:54 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 500, Time: 0.011s
2025-09-02 18:59:35 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 18:59:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:59:49 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 18:59:49 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 18:59:49 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 18:59:49 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 18:59:49 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 18:59:49 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 18:59:49 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 18:59:58 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 18:59:59 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 18:59:59 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.263s
2025-09-02 19:00:01 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:87]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[91:95]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[133:152]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[154:203]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[205:217]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[219:229]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[233:1059]
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:00:01 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 19:00:01 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:00:01 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:00:01 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:00:01 - backend.services.image_service - ERROR - image_service - _check_duplicate_image - 360 - 检查重复图像失败: type object 'Image' has no attribute 'file_hash'
2025-09-02 19:00:01 - backend.services.preprocessing_service - DEBUG - preprocessing_service - denoise_image - 235 - 图像去噪完成，方法: gaussian
2025-09-02 19:00:01 - backend.services.preprocessing_service - DEBUG - preprocessing_service - enhance_contrast - 271 - 对比度增强完成，方法: clahe
2025-09-02 19:00:01 - backend.services.preprocessing_service - DEBUG - preprocessing_service - resize_image - 194 - 图像尺寸调整完成: (100, 100) -> (512, 512)
2025-09-02 19:00:01 - backend.services.preprocessing_service - DEBUG - preprocessing_service - normalize_image - 133 - 图像归一化完成，方法: minmax
2025-09-02 19:00:01 - backend.services.preprocessing_service - INFO - preprocessing_service - preprocess_pipeline - 413 - 预处理流水线完成: load_image -> denoise_gaussian -> contrast_clahe -> resize_bilinear -> normalize_minmax
2025-09-02 19:00:03 - backend.services.feature_extraction_service - ERROR - feature_extraction_service - extract_texture_features - 98 - 纹理特征提取失败: module 'skimage.filters.rank' has no attribute 'variance'
2025-09-02 19:00:03 - backend.services.feature_extraction_service - ERROR - feature_extraction_service - extract_all_features - 515 - 特征提取失败: module 'skimage.filters.rank' has no attribute 'variance'
2025-09-02 19:00:03 - backend.services.image_service - ERROR - image_service - _process_image_sync - 252 - 图像处理失败: module 'skimage.filters.rank' has no attribute 'variance'
2025-09-02 19:00:03 - backend.services.image_service - ERROR - image_service - upload_image_from_content - 126 - 图像上传失败: module 'skimage.filters.rank' has no attribute 'variance'
2025-09-02 19:00:03 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 5f2fa7c1-14fa-4148-8a80-2f911b8acb06, Status: 400, Detail: module 'skimage.filters.rank' has no attribute 'variance'
2025-09-02 19:00:03 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 1.864s
2025-09-02 19:09:51 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:10:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:10:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:10:04 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:10:05 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:10:05 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:10:05 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:10:05 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:10:05 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:10:16 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:10:16 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:10:16 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.258s
2025-09-02 19:10:18 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:87]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[91:95]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[133:152]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[154:203]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[205:217]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[219:229]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[233:1059]
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:10:18 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 19:10:18 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:10:18 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:10:18 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:10:18 - backend.services.image_service - ERROR - image_service - _check_duplicate_image - 360 - 检查重复图像失败: type object 'Image' has no attribute 'file_hash'
2025-09-02 19:10:18 - backend.services.preprocessing_service - DEBUG - preprocessing_service - denoise_image - 235 - 图像去噪完成，方法: gaussian
2025-09-02 19:10:18 - backend.services.preprocessing_service - DEBUG - preprocessing_service - enhance_contrast - 271 - 对比度增强完成，方法: clahe
2025-09-02 19:10:18 - backend.services.preprocessing_service - DEBUG - preprocessing_service - resize_image - 194 - 图像尺寸调整完成: (100, 100) -> (512, 512)
2025-09-02 19:10:18 - backend.services.preprocessing_service - DEBUG - preprocessing_service - normalize_image - 133 - 图像归一化完成，方法: minmax
2025-09-02 19:10:18 - backend.services.preprocessing_service - INFO - preprocessing_service - preprocess_pipeline - 413 - 预处理流水线完成: load_image -> denoise_gaussian -> contrast_clahe -> resize_bilinear -> normalize_minmax
2025-09-02 19:10:22 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_texture_features - 94 - 纹理特征提取完成，共69个特征
2025-09-02 19:10:22 - backend.services.feature_extraction_service - WARNING - feature_extraction_service - extract_shape_features - 235 - 未找到有效区域，返回零特征
2025-09-02 19:10:22 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_statistical_features - 340 - 统计特征提取完成，共22个特征
2025-09-02 19:10:22 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_frequency_features - 406 - 频域特征提取完成，共11个特征
2025-09-02 19:10:22 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_cnn_features - 461 - CNN特征提取完成，模型: resnet50, 特征维度: 2048
2025-09-02 19:10:22 - backend.services.feature_extraction_service - INFO - feature_extraction_service - extract_all_features - 512 - 特征提取完成，共121个特征
2025-09-02 19:10:22 - backend.services.quality_service - ERROR - quality_service - _assess_noise - 213 - 噪声评估失败: PyWavelets is not installed. Please ensure it is installed in order to use this function.
2025-09-02 19:10:29 - backend.services.quality_service - DEBUG - quality_service - assess_image_quality - 127 - 图像质量评估完成，总分: 0.150
2025-09-02 19:10:29 - backend.services.feature_extraction_service - INFO - feature_extraction_service - save_features_to_json - 561 - 特征已保存到: ./uploads\processing_results\4d6d686d-e358-4f41-a046-4e7308c8db37\features.json
2025-09-02 19:10:29 - backend.services.image_service - ERROR - image_service - _save_processing_results - 312 - 保存处理结果失败: Object of type bool is not JSON serializable
2025-09-02 19:10:29 - backend.services.storage_service - INFO - storage_service - upload_file - 121 - 文件上传成功: images/4d6d686d-e358-4f41-a046-4e7308c8db37/test_image.jpg
2025-09-02 19:10:29 - backend.services.image_service - ERROR - image_service - _save_image_to_database - 408 - 保存图像记录失败: 'file_hash' is an invalid keyword argument for Image
2025-09-02 19:10:29 - backend.services.image_service - ERROR - image_service - upload_image_from_content - 126 - 图像上传失败: 'file_hash' is an invalid keyword argument for Image
2025-09-02 19:10:29 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 4e94b820-ab0f-4123-ab06-3d33cb6aa58f, Status: 400, Detail: 'file_hash' is an invalid keyword argument for Image
2025-09-02 19:10:29 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 11.084s
2025-09-02 19:11:32 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:11:45 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:11:46 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:11:46 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:11:46 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:11:46 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:11:46 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:11:47 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:11:47 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:11:47 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:11:47 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:11:47 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.287s
2025-09-02 19:11:49 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/images/upload, Client: 127.0.0.1
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:87]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[91:95]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[133:152]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[154:203]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[205:217]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[219:229]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[233:1059]
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 19:11:49 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 19:11:49 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:11:49 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:11:49 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:11:49 - backend.services.image_service - ERROR - image_service - _check_duplicate_image - 360 - 检查重复图像失败: type object 'Image' has no attribute 'file_hash'
2025-09-02 19:11:49 - backend.services.preprocessing_service - DEBUG - preprocessing_service - denoise_image - 235 - 图像去噪完成，方法: gaussian
2025-09-02 19:11:49 - backend.services.preprocessing_service - DEBUG - preprocessing_service - enhance_contrast - 271 - 对比度增强完成，方法: clahe
2025-09-02 19:11:49 - backend.services.preprocessing_service - DEBUG - preprocessing_service - resize_image - 194 - 图像尺寸调整完成: (100, 100) -> (512, 512)
2025-09-02 19:11:49 - backend.services.preprocessing_service - DEBUG - preprocessing_service - normalize_image - 133 - 图像归一化完成，方法: minmax
2025-09-02 19:11:49 - backend.services.preprocessing_service - INFO - preprocessing_service - preprocess_pipeline - 413 - 预处理流水线完成: load_image -> denoise_gaussian -> contrast_clahe -> resize_bilinear -> normalize_minmax
2025-09-02 19:11:54 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_texture_features - 94 - 纹理特征提取完成，共69个特征
2025-09-02 19:11:54 - backend.services.feature_extraction_service - WARNING - feature_extraction_service - extract_shape_features - 235 - 未找到有效区域，返回零特征
2025-09-02 19:11:54 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_statistical_features - 340 - 统计特征提取完成，共22个特征
2025-09-02 19:11:54 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_frequency_features - 406 - 频域特征提取完成，共11个特征
2025-09-02 19:11:54 - backend.services.feature_extraction_service - DEBUG - feature_extraction_service - extract_cnn_features - 461 - CNN特征提取完成，模型: resnet50, 特征维度: 2048
2025-09-02 19:11:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - extract_all_features - 512 - 特征提取完成，共121个特征
2025-09-02 19:11:54 - backend.services.quality_service - ERROR - quality_service - _assess_noise - 213 - 噪声评估失败: PyWavelets is not installed. Please ensure it is installed in order to use this function.
2025-09-02 19:12:01 - backend.services.quality_service - DEBUG - quality_service - assess_image_quality - 127 - 图像质量评估完成，总分: 0.150
2025-09-02 19:12:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - save_features_to_json - 561 - 特征已保存到: ./uploads\processing_results\35486f6b-9d17-4ddc-a674-781a522fa020\features.json
2025-09-02 19:12:01 - backend.services.image_service - ERROR - image_service - _save_processing_results - 312 - 保存处理结果失败: Object of type bool is not JSON serializable
2025-09-02 19:12:01 - backend.services.storage_service - INFO - storage_service - upload_file - 121 - 文件上传成功: images/35486f6b-9d17-4ddc-a674-781a522fa020/test_image.jpg
2025-09-02 19:12:01 - backend.services.image_service - INFO - image_service - _save_image_to_database - 403 - 图像记录已保存到数据库: 35486f6b-9d17-4ddc-a674-781a522fa020
2025-09-02 19:12:01 - backend.services.image_service - INFO - image_service - upload_image_from_content - 111 - 图像上传成功: 35486f6b-9d17-4ddc-a674-781a522fa020
2025-09-02 19:12:01 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 12.076s
2025-09-02 19:13:23 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/v1/auth/login, Client: 127.0.0.1
2025-09-02 19:13:23 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 19:13:49 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:14:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:14:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:14:03 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:14:03 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:14:03 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:14:03 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:14:03 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:14:03 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:14:03 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:14:03 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:14:03 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.273s
2025-09-02 19:14:05 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models, Client: 127.0.0.1
2025-09-02 19:14:05 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 404, Time: 0.001s
2025-09-02 19:14:07 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:14:07 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:14:07 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:14:07 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:14:07 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 5d80927e-dc6c-463f-a9e5-de06a8204648, Status: 403, Detail: 需要权限: model_management
2025-09-02 19:14:07 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.008s
2025-09-02 19:14:30 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:14:42 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:14:43 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:14:43 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:14:43 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:14:43 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:14:43 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:14:43 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:14:43 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:15:15 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:15:15 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:15:15 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.253s
2025-09-02 19:15:17 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:15:17 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:15:17 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:15:17 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:15:17 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 455faa84-8cd1-4832-8bbd-5359a408012e, Status: 403, Detail: 需要权限: model_view
2025-09-02 19:15:17 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.008s
2025-09-02 19:15:19 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:15:19 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:15:19 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:15:19 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:15:19 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 4f199934-549d-4c70-945d-3b5d6a099207, Status: 403, Detail: 需要权限: model_management
2025-09-02 19:15:19 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.007s
2025-09-02 19:18:50 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:19:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:19:04 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:19:04 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:19:04 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:19:04 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:19:04 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:19:05 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:19:05 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:19:17 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:19:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:19:32 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:19:32 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:19:32 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:19:32 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:19:32 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:19:33 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:19:33 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:21:13 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:21:13 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:21:13 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.276s
2025-09-02 19:21:15 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:21:15 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:21:15 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:21:15 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:21:15 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.012s
2025-09-02 19:21:40 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:21:52 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:21:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:21:54 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:21:54 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:21:54 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:21:54 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:21:54 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:21:54 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:21:54 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:21:55 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:21:55 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.270s
2025-09-02 19:21:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:21:57 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:21:57 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:21:57 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:21:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.011s
2025-09-02 19:22:07 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:22:19 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:22:21 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:22:21 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:22:21 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:22:21 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:22:21 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:22:21 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:22:21 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:22:21 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:22:22 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:22:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.286s
2025-09-02 19:22:24 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:22:24 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:22:24 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:22:24 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:22:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.012s
2025-09-02 19:22:26 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:22:26 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:22:26 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:22:26 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:22:26 - backend.services.model_service - ERROR - model_service - register_model - 175 - 模型注册失败: type object 'AIModel' has no attribute 'name'
2025-09-02 19:22:26 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: b9b1918e-515a-4994-817e-a75bc7b64674, Status: 400, Detail: 模型注册失败
2025-09-02 19:22:26 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.009s
2025-09-02 19:22:55 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:23:09 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:23:10 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:23:10 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:23:11 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:23:11 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:23:11 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:23:11 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:23:11 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:23:11 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:23:11 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:23:11 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.263s
2025-09-02 19:23:13 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:23:13 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:23:13 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:23:13 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:23:13 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.012s
2025-09-02 19:23:15 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:23:15 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:23:15 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:23:15 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:23:15 - backend.services.model_service - ERROR - model_service - register_model - 175 - 模型注册失败: type object 'AIModel' has no attribute 'name'
2025-09-02 19:23:15 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 0641a78e-cc73-477f-af07-ef791032c0c7, Status: 400, Detail: 模型注册失败
2025-09-02 19:23:15 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.011s
2025-09-02 19:23:55 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:24:08 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:24:09 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:24:09 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:24:10 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:24:10 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:24:10 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:24:10 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:24:10 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:24:13 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:24:26 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:24:27 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:24:27 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:24:28 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:24:28 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:24:28 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:24:28 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:24:28 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:24:28 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:24:28 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:24:28 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.287s
2025-09-02 19:24:30 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:24:30 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:24:30 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:24:30 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:24:30 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.013s
2025-09-02 19:24:32 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:24:32 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:24:32 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:24:32 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:24:32 - backend.services.model_service - ERROR - model_service - register_model - 177 - 模型注册失败: type object 'AIModel' has no attribute 'name'
2025-09-02 19:24:32 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: b29cc248-7737-49de-b562-38f2636de080, Status: 400, Detail: 模型注册失败
2025-09-02 19:24:32 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.009s
2025-09-02 19:25:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:25:02 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:25:02 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:25:12 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:25:13 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:25:13 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:25:13 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:25:14 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:25:14 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:25:14 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:25:14 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:25:20 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:25:20 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:25:20 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.256s
2025-09-02 19:25:22 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:25:22 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:25:22 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:25:22 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:25:22 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.010s
2025-09-02 19:25:24 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:25:24 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:25:24 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:25:24 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:25:24 - backend.services.model_service - ERROR - model_service - register_model - 177 - 模型注册失败: type object 'AIModel' has no attribute 'name'
2025-09-02 19:25:24 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: b3b07c0b-013a-4795-964e-13141c732d96, Status: 400, Detail: 模型注册失败
2025-09-02 19:25:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.009s
2025-09-02 19:26:12 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:26:13 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:26:13 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.280s
2025-09-02 19:26:33 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:26:33 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 19:26:33 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:26:33 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 19:26:46 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:26:46 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:26:46 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.310s
2025-09-02 19:27:05 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:27:05 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 19:27:05 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:27:05 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.002s
2025-09-02 19:27:08 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:27:08 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 62652252-ea1c-4fae-a009-e5db5d279f10, Status: 401, Detail: 用户名或密码错误
2025-09-02 19:27:08 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.005s
2025-09-02 19:27:09 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:27:09 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 47656630-51c8-421a-bf7f-de5572fededf, Status: 401, Detail: 用户名或密码错误
2025-09-02 19:27:09 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.006s
2025-09-02 19:27:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:27:10 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 8685a374-ff10-441c-a54c-fc6ea2ec3241, Status: 401, Detail: 用户名或密码错误
2025-09-02 19:27:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.006s
2025-09-02 19:27:23 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:27:24 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:27:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.338s
2025-09-02 19:27:50 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:28:02 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:28:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:28:03 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:28:03 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:28:03 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:28:03 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:28:04 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:28:04 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:29:05 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:29:17 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:29:19 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:29:19 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:29:19 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:29:19 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:29:19 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:29:19 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:29:19 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:29:24 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:29:24 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:29:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.264s
2025-09-02 19:29:26 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:29:26 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:29:26 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:29:26 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:29:26 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.012s
2025-09-02 19:29:28 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:29:28 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:29:28 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:29:28 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:29:28 - backend.services.model_service - ERROR - model_service - register_model - 176 - 模型注册失败: 'version' is an invalid keyword argument for ModelVersion
2025-09-02 19:29:28 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 66acbe63-5b47-4fce-bb1e-3e06d2fbede9, Status: 400, Detail: 模型注册失败
2025-09-02 19:29:28 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.036s
2025-09-02 19:29:56 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:29:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:29:57 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:30:06 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:30:07 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:30:07 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:30:08 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:30:08 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:30:08 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:30:08 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:30:08 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:30:15 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:30:15 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:30:15 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.259s
2025-09-02 19:30:17 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:30:17 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:30:17 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:30:17 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:30:17 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.016s
2025-09-02 19:30:19 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:30:19 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:30:19 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:30:19 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:30:19 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 5312c9ed-9ec2-43c6-b42a-2aa2427fec04, Status: 403, Detail: 需要权限: model_inference
2025-09-02 19:30:19 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.006s
2025-09-02 19:32:42 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:32:42 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:32:42 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.236s
2025-09-02 19:32:44 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:32:44 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:32:44 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:32:44 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:32:44 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.010s
2025-09-02 19:32:46 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:32:46 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:32:46 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:32:46 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:32:46 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 081b2f44-b661-4786-a2cb-41769443351b, Status: 403, Detail: 需要权限: model_inference
2025-09-02 19:32:46 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 403, Time: 0.007s
2025-09-02 19:33:53 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:34:05 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:34:07 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:34:07 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:34:07 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:34:07 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:34:07 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:34:08 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:34:08 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:34:11 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:34:22 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:34:23 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:34:23 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:34:23 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:34:23 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:34:23 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:34:24 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:34:24 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:34:29 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:34:29 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:34:29 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.261s
2025-09-02 19:34:31 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:34:31 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:34:31 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:34:31 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:34:31 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.012s
2025-09-02 19:34:33 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:34:33 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:34:33 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:34:33 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:34:33 - backend.services.model_service - ERROR - model_service - load_model - 274 - 模型加载失败: type object 'ModelVersion' has no attribute 'status'
2025-09-02 19:34:33 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 684c10b6-6eec-4ae3-888a-b22f0a385c3c, Status: 400, Detail: 模型加载失败
2025-09-02 19:34:33 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.008s
2025-09-02 19:35:20 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:35:30 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:35:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:35:32 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:35:32 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:35:32 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:35:32 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:35:32 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:35:32 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:36:36 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:36:47 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:36:48 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:36:49 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:36:49 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:36:49 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:36:49 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:36:49 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:36:49 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:37:30 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:37:41 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:37:42 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:37:42 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:37:42 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:37:42 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:37:42 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:37:42 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:37:42 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:37:46 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:37:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:37:58 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:37:58 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:37:59 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:37:59 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:37:59 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:37:59 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:37:59 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:38:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:38:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 19:38:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 19:38:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 19:38:23 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:38:23 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:38:23 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.266s
2025-09-02 19:38:25 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:38:25 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:38:25 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:38:25 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:38:25 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.013s
2025-09-02 19:38:27 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:38:27 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:38:27 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:38:27 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:38:27 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 6f0411b4-3963-4a07-b8dc-74ed4b78220a, Status: 400, Detail: 模型版本不存在或未就绪
2025-09-02 19:38:27 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.013s
2025-09-02 19:39:41 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:39:54 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:39:56 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:39:56 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:39:56 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:39:56 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:39:56 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:39:57 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:39:57 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:40:02 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:40:16 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:40:18 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:40:18 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:40:18 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:40:18 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:40:18 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:40:19 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:40:19 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:40:25 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:40:58 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:41:00 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:41:01 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:41:01 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:41:01 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:41:01 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:41:01 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:41:01 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:49:52 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:49:53 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:49:53 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.327s
2025-09-02 19:49:55 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:49:55 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:49:55 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:49:55 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:49:55 - backend.services.model_service - ERROR - model_service - get_model_list - 931 - 获取模型列表失败: 'ModelVersion' object has no attribute 'version'
2025-09-02 19:49:55 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.022s
2025-09-02 19:49:57 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/register, Client: 127.0.0.1
2025-09-02 19:49:57 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:49:57 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:49:57 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:49:57 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: ed5b3aef-202b-4b21-8c07-aae572a4ed9b, Status: 400, Detail: 模型 test_chest_xray_classifier 已存在
2025-09-02 19:49:57 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.016s
2025-09-02 19:52:44 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:53:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:53:03 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:53:03 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:53:03 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:53:03 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:53:03 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:53:04 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:53:04 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:53:04 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:53:04 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:53:04 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.413s
2025-09-02 19:53:06 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:53:06 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:53:06 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:53:06 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:53:06 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.023s
2025-09-02 19:53:08 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:53:08 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:53:08 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:53:08 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:53:08 - backend.services.model_service - ERROR - model_service - load_model - 274 - 模型加载失败: StorageService.download_file() missing 1 required positional argument: 'local_path'
2025-09-02 19:53:08 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 973c32a6-ec9e-4034-b85a-f1738ff7cec8, Status: 400, Detail: 模型加载失败
2025-09-02 19:53:08 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.019s
2025-09-02 19:55:15 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:55:32 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:55:34 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:55:34 - backend.services.model_service - INFO - model_service - __init__ - 106 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:55:34 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:55:34 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:55:34 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:55:35 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:55:35 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:55:41 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 19:55:59 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:56:01 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 19:56:01 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 19:56:01 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 19:56:01 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 19:56:01 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 19:56:02 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 19:56:02 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 19:56:10 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 19:56:10 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 19:56:10 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.354s
2025-09-02 19:56:12 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 19:56:12 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:56:12 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:56:12 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:56:12 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.019s
2025-09-02 19:56:14 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 19:56:14 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 19:56:14 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 19:56:14 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 19:56:14 - backend.services.storage_service - ERROR - storage_service - _download_from_local - 303 - 本地存储下载失败: 文件不存在: ./uploads\models/test_chest_xray_classifier/model.pth
2025-09-02 19:56:14 - backend.services.storage_service - ERROR - storage_service - download_file - 281 - 文件下载失败: 文件不存在: ./uploads\models/test_chest_xray_classifier/model.pth
2025-09-02 19:56:14 - backend.services.model_service - ERROR - model_service - load_model - 280 - 模型加载失败: 文件不存在: ./uploads\models/test_chest_xray_classifier/model.pth
2025-09-02 19:56:14 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 116447b5-bfaf-4a3c-b996-df56765aa39c, Status: 400, Detail: 模型加载失败
2025-09-02 19:56:14 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 0.028s
2025-09-02 20:01:09 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:01:09 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:01:09 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.260s
2025-09-02 20:01:11 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 20:01:11 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:01:11 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:01:11 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:01:11 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.010s
2025-09-02 20:01:13 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 20:01:13 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:01:13 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:01:13 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:01:14 - backend.services.storage_service - INFO - storage_service - download_file - 277 - 文件下载成功: models/test_chest_xray_classifier/model.pth
2025-09-02 20:01:15 - backend.services.model_service - ERROR - model_service - load_model - 280 - 模型加载失败: 'ModelVersion' object has no attribute 'version'
2025-09-02 20:01:15 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: ae5104c3-0b94-4a06-aa8e-e7d81cd29829, Status: 400, Detail: 模型加载失败
2025-09-02 20:01:15 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 1.126s
2025-09-02 20:01:53 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:02:09 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:02:11 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:02:11 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:02:11 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:02:11 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:02:11 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:02:11 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:02:11 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:02:11 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:02:12 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:02:12 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.308s
2025-09-02 20:02:14 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 20:02:14 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:02:14 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:02:14 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:02:14 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.017s
2025-09-02 20:02:16 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 20:02:16 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:02:16 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:02:16 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:02:17 - backend.services.storage_service - INFO - storage_service - download_file - 277 - 文件下载成功: models/test_chest_xray_classifier/model.pth
2025-09-02 20:02:17 - backend.services.model_service - ERROR - model_service - load_model - 280 - 模型加载失败: 'ModelVersion' object has no attribute 'config'
2025-09-02 20:02:17 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 14b1fa36-77d8-43da-af8d-f4da2ee0c113, Status: 400, Detail: 模型加载失败
2025-09-02 20:02:17 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 1.301s
2025-09-02 20:02:42 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:02:56 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:02:57 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:02:57 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:02:58 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:02:58 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:02:58 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:02:58 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:02:58 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:02:58 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:02:58 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:02:58 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.282s
2025-09-02 20:03:00 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 20:03:00 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:03:00 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:03:00 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:03:00 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.016s
2025-09-02 20:03:02 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 20:03:02 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:03:02 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:03:02 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:03:03 - backend.services.storage_service - INFO - storage_service - download_file - 277 - 文件下载成功: models/test_chest_xray_classifier/model.pth
2025-09-02 20:03:03 - backend.services.model_service - ERROR - model_service - load_model - 280 - 模型加载失败: 'AIModel' object has no attribute 'name'
2025-09-02 20:03:03 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 9fcb4db1-49f1-4176-a1b6-65907826f9a7, Status: 400, Detail: 模型加载失败
2025-09-02 20:03:03 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 400, Time: 1.124s
2025-09-02 20:03:45 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:04:07 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:04:10 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:04:10 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:04:10 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:04:10 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:04:10 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:04:10 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:04:11 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:04:11 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:04:11 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:04:11 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.428s
2025-09-02 20:04:13 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 20:04:13 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:04:13 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:04:13 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:04:13 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.023s
2025-09-02 20:04:15 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 20:04:15 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:04:15 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:04:15 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:04:16 - backend.services.storage_service - INFO - storage_service - download_file - 277 - 文件下载成功: models/test_chest_xray_classifier/model.pth
2025-09-02 20:04:17 - backend.services.model_service - INFO - model_service - load_model - 267 - 模型加载成功: test_chest_xray_classifier v1.0.0
2025-09-02 20:04:17 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 1.655s
2025-09-02 20:04:19 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/predict, Client: 127.0.0.1
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:81]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[85:138]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[176:195]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[197:246]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[248:260]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[262:272]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[276:1102]
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 20:04:19 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 20:04:19 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:04:19 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:04:19 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:04:19 - backend.services.model_service - ERROR - model_service - _log_inference - 742 - 记录推理日志失败: 'version' is an invalid keyword argument for Inference
2025-09-02 20:04:19 - backend.services.model_service - DEBUG - model_service - predict - 397 - 推理完成，耗时: 0.175秒
2025-09-02 20:04:19 - backend.api.models - ERROR - models - predict_image - 327 - 图像推理失败: 1 validation error for InferenceResponse
confidence_scores.classification
  Input should be a valid number [type=float_type, input_value=[0.6250418424606323], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
2025-09-02 20:04:19 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: 3265fa7c-f825-46c3-b618-23984b11e01d, Status: 500, Detail: 图像推理失败
2025-09-02 20:04:19 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 500, Time: 0.229s
2025-09-02 20:05:07 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:05:31 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:05:34 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:05:34 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:05:34 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:05:34 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:05:34 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:05:35 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:05:35 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:11:29 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:11:53 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:11:55 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:11:55 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:11:55 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:11:55 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:11:55 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:11:56 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:11:56 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:12:02 - backend.main - INFO - main - lifespan - 49 - 关闭 Medical AI Platform...
2025-09-02 20:12:20 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:12:23 - backend.services.feature_extraction_service - INFO - feature_extraction_service - _load_pretrained_models - 55 - 预训练CNN模型加载完成
2025-09-02 20:12:23 - backend.services.model_service - INFO - model_service - __init__ - 107 - 模型服务初始化完成，使用设备: cpu
2025-09-02 20:12:23 - asyncio - DEBUG - selector_events - __init__ - 64 - Using selector: SelectSelector
2025-09-02 20:12:23 - backend.main - INFO - main - lifespan - 25 - 启动 Medical AI Platform...
2025-09-02 20:12:23 - backend.main - INFO - main - lifespan - 29 - 初始化数据库...
2025-09-02 20:12:23 - backend.main - INFO - main - lifespan - 37 - 初始化基础数据...
2025-09-02 20:12:24 - backend.main - INFO - main - lifespan - 40 - Medical AI Platform 启动完成
2025-09-02 20:12:24 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:12:24 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:12:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.413s
2025-09-02 20:12:26 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/models/list, Client: 127.0.0.1
2025-09-02 20:12:26 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:12:26 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:12:26 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:12:26 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.024s
2025-09-02 20:12:28 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/load, Client: 127.0.0.1
2025-09-02 20:12:28 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:12:28 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:12:28 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:12:29 - backend.services.storage_service - INFO - storage_service - download_file - 277 - 文件下载成功: models/test_chest_xray_classifier/model.pth
2025-09-02 20:12:30 - backend.services.model_service - INFO - model_service - load_model - 268 - 模型加载成功: test_chest_xray_classifier v1.0.0
2025-09-02 20:12:30 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 1.587s
2025-09-02 20:12:32 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/models/9c508563-257a-4b15-aef3-1d5f6b0f110c/predict, Client: 127.0.0.1
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[36:55]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[57:81]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[85:138]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_begin with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[176:195]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[197:246]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_field with data[248:260]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_header_value with data[262:272]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_header_end with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_headers_finished with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 625 - Calling on_part_data with data[276:1102]
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_part_end with no data
2025-09-02 20:12:32 - python_multipart.multipart - DEBUG - multipart - callback - 628 - Calling on_end with no data
2025-09-02 20:12:32 - backend.api.auth - INFO - auth - get_current_user - 87 - 验证令牌: eyJhbGciOiJIUzI1NiIs...
2025-09-02 20:12:32 - backend.api.auth - INFO - auth - get_current_user - 91 - 令牌验证结果: {'valid': True, 'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'role': 'super_admin', 'user_data': {'user_id': '9094955e-3ccb-41ba-a0a8-af63d97c7fa3', 'username': 'admin', 'email': 'admin@medical-ai.com', 'full_name': '系统管理员', 'is_active': True, 'is_verified': True, 'role': 'super_admin', 'roles': ['super_admin'], 'permissions': ['model_inference', 'image.delete', 'model_view', 'model.delete', 'model.deploy', 'model.create', 'model.read', 'annotation.validate', 'user.update', 'user.delete', 'user.create', 'annotation.read', 'quality.report', 'user.read', 'model.execute', 'annotation.delete', 'patient.create', 'patient.read', 'patient.delete', 'quality.assess', 'annotation.update', 'image.update', 'system.audit', 'model_training', 'image.read', 'annotation.create', 'patient.update', 'image.download', 'quality.control', 'model_management', 'system.backup', 'model.update', 'model.train', 'system.admin', 'image.create']}}
2025-09-02 20:12:32 - backend.api.auth - INFO - auth - get_current_user - 103 - 用户认证成功: admin
2025-09-02 20:12:32 - backend.services.model_service - ERROR - model_service - _log_inference - 744 - 记录推理日志失败: (sqlite3.IntegrityError) NOT NULL constraint failed: inferences.image_id
[SQL: INSERT INTO inferences (inference_id, image_id, model_id, model_version_id, user_id, inference_type, input_data, processed_output, confidence_scores, processing_time_ms, gpu_memory_used_mb, cpu_usage_percent, status, error_message, quality_score, is_reviewed, reviewed_by, review_notes, created_at, completed_at, reviewed_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('aaa8768231ea43c59809f983ad68b0e6', None, '9c508563257a4b15aef31d5f6b0f110c', '2b1de35e1323436b862e8acc64862890', None, None, '"[1, 3, 224, 224]"', '"{\\"class\\": [1], \\"probabilities\\": [[0.43457546830177307, 0.5654244422912598]]}"', '"{\\"classification\\": 0.5654244422912598}"', 98, None, None, 'completed', None, None, 0, None, None, '2025-09-02 12:12:32.351853', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-09-02 20:12:32 - backend.services.model_service - DEBUG - model_service - predict - 398 - 推理完成，耗时: 0.098秒
2025-09-02 20:12:32 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.139s
2025-09-02 20:30:02 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:02 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:02 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.299s
2025-09-02 20:30:18 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:18 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:18 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.272s
2025-09-02 20:30:20 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:21 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:21 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.278s
2025-09-02 20:30:23 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:24 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:24 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.267s
2025-09-02 20:30:24 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:25 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:25 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.281s
2025-09-02 20:30:25 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:25 - backend.services.auth_service - ERROR - auth_service - login_user - 235 - 用户登录失败: (sqlite3.IntegrityError) UNIQUE constraint failed: user_sessions.refresh_token
[SQL: INSERT INTO user_sessions (session_id, user_id, access_token, refresh_token, ip_address, user_agent, is_active, expires_at, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING last_accessed_at]
[parameters: ('fcf34ac2a4644513a2da5a512d8b291d', '9094955e3ccb41baa0a8af63d97c7fa3', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiOTA5NDk1NWUtM2NjYi00MWJhLWEwYTgtYWY2M2Q5N2M3ZmEzIiwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOiJzdXBlcl9hZG1pbiIsImV4cCI6MTc1NjgxODAyNSwiaWF0IjoxNzU2ODE2MjI1LCJ0eXBlIjoiYWNjZXNzIn0.Sx_WrfHu681ku_K7MQYftip1YevaK8Q6epNKAXSGBkw', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiOTA5NDk1NWUtM2NjYi00MWJhLWEwYTgtYWY2M2Q5N2M3ZmEzIiwiZXhwIjoxNzU3NDIxMDI1LCJpYXQiOjE3NTY4MTYyMjUsInR5cGUiOiJyZWZyZXNoIn0.wCmQUD8a-CCzgt2YQNffK2VWa8CPZz6tRRDeFATpo9U', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36', 1, '2025-09-02 13:00:25.708076', '2025-09-02 12:30:25.708075')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-09-02 20:30:25 - backend.main - WARNING - main - http_exception_handler - 137 - HTTP Exception - ID: e468fe43-29d2-4440-8288-aaae4748cd48, Status: 401, Detail: 登录失败，请稍后重试
2025-09-02 20:30:25 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 401, Time: 0.258s
2025-09-02 20:30:29 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:29 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:29 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.287s
2025-09-02 20:30:32 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 20:30:32 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 20:30:32 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: GET, URL: http://localhost:8000/api/system/info, Client: 127.0.0.1
2025-09-02 20:30:32 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.001s
2025-09-02 20:30:46 - backend.main - INFO - main - log_requests - 99 - Request started - ID: unknown, Method: POST, URL: http://localhost:8000/api/auth/login, Client: 127.0.0.1
2025-09-02 20:30:47 - backend.services.auth_service - INFO - auth_service - login_user - 218 - 用户登录成功: admin
2025-09-02 20:30:47 - backend.main - INFO - main - log_requests - 112 - Request completed - ID: unknown, Status: 200, Time: 0.279s
